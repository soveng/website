---
import { markdownify } from "@/lib/utils/textConverter";
const { upcoming_cohorts } = Astro.props;
---

{
  upcoming_cohorts.data.enable && (
    <section id="upcoming-cohorts" class="section">
      <div class="container">
        <div class="row">
          <div class="md:col-7">
            <h2 set:html={markdownify(upcoming_cohorts.data.title)} class="mb-4" />
            <div class="flex flex-col gap-2">
              {upcoming_cohorts.data.cohorts.map(
                (cohort: { name: string; description?: string; duration?: string; dates: string; link?: string; blogLink?: string }) => {
                  const descriptionPart = cohort.description ? `: ${cohort.description}` : '';
                  const durationDesktop = cohort.duration ? `${cohort.duration}, ` : '';
                  const durationMobile = cohort.duration ? `${cohort.duration.replace('weeks', 'wks')}, ` : '';
                  const datesMobile = cohort.dates
                    .replace('March', 'Mar')
                    .replace('April', 'Apr')
                    .replace('July', 'Jul')
                    .replace('August', 'Aug');
                  const nameAndDescription = cohort.blogLink ? (
                    <a href={cohort.blogLink} target="_blank" rel="noopener noreferrer" class="underline hover:no-underline">
                      <strong>{cohort.name}</strong>
                      <span class="hidden md:inline">{descriptionPart}</span>
                    </a>
                  ) : (
                    <>
                      <strong>{cohort.name}</strong>
                      <span class="hidden md:inline">{descriptionPart}</span>
                    </>
                  );
                  return (
                    <div class="text-lg font-medium text-text-dark dark:text-white">
                      {nameAndDescription}
                      {` (`}
                      <span class="hidden md:inline">{durationDesktop}</span>
                      <span class="md:hidden">{durationMobile}</span>
                      <span class="hidden md:inline">{cohort.dates}</span>
                      <span class="md:hidden">{datesMobile}</span>
                      {`)`}
                      {cohort.link && (
                        <> - <a href={cohort.link} target="_blank" rel="noopener noreferrer" class="underline hover:no-underline">
                          <span class="hidden md:inline">Apply now!</span>
                          <span class="md:hidden">Apply</span>
                        </a></>
                      )}
                    </div>
                  );
                }
              )}
            </div>
          </div>
        </div>
      </div>
    </section>
  )
}

